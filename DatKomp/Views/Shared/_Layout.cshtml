<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - DatKomp</title>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/DatKomp.styles.css" asp-append-version="true" />
</head>
<body>
@{
    var cartCount = 0;
    var cartJson = Context.Session.GetString("Cart");
    if (!string.IsNullOrEmpty(cartJson))
    {
        var cartItems = System.Text.Json.JsonSerializer.Deserialize<List<DatKomp.Models.CartItem>>(cartJson) ?? new List<DatKomp.Models.CartItem>();
        foreach (var item in cartItems)
        {
            cartCount += item.Quantity;
        }
    }
}
    <header>
        <nav class="w-full bg-blue-900">
            <div class="container mx-auto flex justify-between items-center px-5 h-16">
                <a class="text-xl text-white" asp-area="" asp-controller="Home" asp-action="Index">DatKomp</a>
                <div class="flex gap-6 items-center">
                    <a class="text-white hover:underline" asp-area="" asp-controller="Home" asp-action="Index">Sākums</a>
                    <a class="text-white hover:underline" asp-area="" asp-controller="Home" asp-action="Service">Serviss</a>
                    <a class="text-white hover:underline" asp-area="" asp-controller="Home" asp-action="About">Par mums</a>
                    <a class="text-white hover:underline" asp-area="" asp-controller="Home" asp-action="Contacts">Kontakti</a>
                    <a class="text-white hover:underline relative" asp-area="" asp-controller="Cart" asp-action="Index">
                        Grozs
                        @if (cartCount > 0)
                        {
                            <span class="ml-1 inline-flex items-center justify-center rounded-full bg-red-500 text-xs text-white px-1.5 py-0.5">@cartCount</span>
                        }
                    </a>

                    @if (User.Identity?.IsAuthenticated == true)
                    {
                        @if (User.IsInRole("Admin"))
                        {
                            <a class="text-white hover:underline" asp-controller="Admin" asp-action="Index">Admin panelis</a>
                        }

                        <a class="text-white hover:underline" asp-controller="Account" asp-action="Orders">
                            @User.Identity.Name
                        </a>
                        <form asp-controller="Account" asp-action="Logout" method="post" class="inline">
                            <button type="submit" class="text-white hover:underline">Izrakstīties</button>
                        </form>
                    }
                    else
                    {
                        <a class="text-white hover:underline hover:bg-blue-500/50 py-2 px-4 bg-blue-500 rounded-xl" asp-controller="Account" asp-action="Login">Pieteikties</a>
                        <a class="text-white hover:underline hover:bg-blue-500/50 py-2 px-4 bg-blue-500 rounded-xl" asp-controller="Account" asp-action="Register">Reģistrēties</a>
                    }
                </div>
            </div>
        </nav>
    </header>
    <div class="w-full bg-gray-500/20">
        <div class="container mx-auto flex justify-evenly items-center ">
            <a asp-controller="Home" asp-action="Index" asp-route-category="CPU" class="cursor-pointer py-3 px-5 flex flex-col items-center gap-2 transform transition-transform duration-200 ease-out hover:scale-105">
                <svg class="w-10 h-10 text-gray-500" viewBox="0 0 24 24" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cpu-icon lucide-cpu"><path d="M12 20v2"/><path d="M12 2v2"/><path d="M17 20v2"/><path d="M17 2v2"/><path d="M2 12h2"/><path d="M2 17h2"/><path d="M2 7h2"/><path d="M20 12h2"/><path d="M20 17h2"/><path d="M20 7h2"/><path d="M7 20v2"/><path d="M7 2v2"/><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="8" y="8" width="8" height="8" rx="1"/></svg>
                </svg>
                <span class="!text-black text-ceneter font-semibold">CPU</span>
            </a>
            <a asp-controller="Home" asp-action="Index" asp-route-category="GPU" class="cursor-pointer py-3 px-5 flex flex-col items-center gap-2 transform transition-transform duration-200 ease-out hover:scale-105">
                <svg class="w-10 h-10 text-gray-500" viewBox="0 0 24 24" aria-hidden="true">
                   <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gpu-icon lucide-gpu"><path d="M2 21V3"/><path d="M2 5h18a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2.26"/><path d="M7 17v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3"/><circle cx="16" cy="11" r="2"/><circle cx="8" cy="11" r="2"/></svg>
                </svg>
                <span class="!text-black text-ceneter font-semibold">GPU</span>
            </a>
            <a asp-controller="Home" asp-action="Index" asp-route-category="PSU" class="cursor-pointer py-3 px-5 flex flex-col items-center gap-2 transform transition-transform duration-200 ease-out hover:scale-105">
                <svg class="w-10 h-10 text-gray-500" viewBox="0 0 24 24" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cable-icon lucide-cable"><path d="M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z"/><path d="M17 21v-2"/><path d="M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10"/><path d="M21 21v-2"/><path d="M3 5V3"/><path d="M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z"/><path d="M7 5V3"/></svg>
                </svg>
                <span class="!text-black text-ceneter font-semibold">PSU</span>
            </a>
            <a asp-controller="Home" asp-action="Index" asp-route-category="Motherboard" class="cursor-pointer py-3 px-5 flex flex-col items-center gap-2 transform transition-transform duration-200 ease-out hover:scale-105">
                <svg class="w-10 h-10 text-gray-500" viewBox="0 0 24 24" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circuit-board-icon lucide-circuit-board"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M11 9h4a2 2 0 0 0 2-2V3"/><circle cx="9" cy="9" r="2"/><path d="M7 21v-4a2 2 0 0 1 2-2h4"/><circle cx="15" cy="15" r="2"/></svg>
                </svg>
                <span class="!text-black text-ceneter font-semibold">MBU</span>
            </a>
            <a asp-controller="Home" asp-action="Index" asp-route-category="RAM" class="cursor-pointer py-3 px-5 flex flex-col items-center gap-2 transform transition-transform duration-200 ease-out hover:scale-105">
                <svg class="w-10 h-10 text-gray-500" viewBox="0 0 24 24" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-memory-stick-icon lucide-memory-stick"><path d="M12 12v-2"/><path d="M12 18v-2"/><path d="M16 12v-2"/><path d="M16 18v-2"/><path d="M2 11h1.5"/><path d="M20 18v-2"/><path d="M20.5 11H22"/><path d="M4 18v-2"/><path d="M8 12v-2"/><path d="M8 18v-2"/><rect x="2" y="6" width="20" height="10" rx="2"/></svg>
                </svg>
                <span class="!text-black text-ceneter font-semibold">RAM</span>
            </a>
            <a asp-controller="Home" asp-action="Index" asp-route-category="Memory" class="cursor-pointer py-3 px-5 flex flex-col items-center gap-2 transform transition-transform duration-200 ease-out hover:scale-105">
                <svg class="w-10 h-10 text-gray-500" viewBox="0 0 24 24" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hard-drive-icon lucide-hard-drive"><line x1="22" x2="2" y1="12" y2="12"/><path d="M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/><line x1="6" x2="6.01" y1="16" y2="16"/><line x1="10" x2="10.01" y1="16" y2="16"/></svg>
                </svg>
                <span class="!text-black text-ceneter font-semibold">Atmiņa</span>
            </a>
            <a asp-controller="Home" asp-action="Index" asp-route-category="Case" class="cursor-pointer py-3 px-5 flex flex-col items-center gap-2 transform transition-transform duration-200 ease-out hover:scale-105">
                <svg class="w-10 h-10 text-gray-500" viewBox="0 0 24 24" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-box-icon lucide-box"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>
                </svg>
                <span class="!text-black text-ceneter font-semibold">Korpuss</span>
            </a>
            <a asp-controller="Home" asp-action="Index" asp-route-category="Coolers" class="cursor-pointer py-3 px-5 flex flex-col items-center gap-2 transform transition-transform duration-200 ease-out hover:scale-105">
                <svg class="w-10 h-10 text-gray-500" viewBox="0 0 24 24" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-fan-icon lucide-fan"><path d="M10.827 16.379a6.082 6.082 0 0 1-8.618-7.002l5.412 1.45a6.082 6.082 0 0 1 7.002-8.618l-1.45 5.412a6.082 6.082 0 0 1 8.618 7.002l-5.412-1.45a6.082 6.082 0 0 1-7.002 8.618l1.45-5.412Z"/><path d="M12 12v.01"/></svg>
                </svg>
                <span class="!text-black text-ceneter font-semibold">Dzese</span>
            </a>
        </div>
    </div>
    <div class="container mx-auto px-5 pt-10">
        <main role="main" class="pb-8">
            @RenderBody()
        </main>
    </div>

    <footer class="border-t mt-8 text-gray-500 text-sm">
        <div class="container mx-auto px-5 py-4 flex justify-between items-center">
            <span>&copy; 2025 - DatKomp</span>
            <a class="text-gray-500 hover:text-gray-700" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
        </div>
    </footer>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
